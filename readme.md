# Salsa 1-Question Survey Dropdown Buttonizer

Clients and account teams want to save the data generated by one-question surveys. This is best done in Salsa through a custom field.

But custom fields in Sals can't output radio buttons on forms. Instead "pick lists" are represented by `<select>` element dropdown menus. This library converts standard dropdown menus into radio buttons.

## Setup

TK: How to setup Salsa custom fields

## Development

1. **Install dependencies:** `npm i`.
2. **Edit Javascript:** The meat of this code is contained in `src/convert-dropdowns.js`.
3. **Edit CSS:** CSS for the elements generated by this code is contained in `css/styles.css`.
4. **Run tests:** This code uses [Jest](https://jestjs.io): `npm test` or `npm test -- --watch` 

There's a simple `.prettierrc` file to support automated Javascript styling through [Prettier](https://prettier.io/). Really just an experiment for now.

The Javascript can be pretty-fied with `npx prettier --write *.js`.

## Deployment

To faciliate testing, ES6 features and easy CSS asset loading, this tool uses a fairly simple [Webpack](https://webpack.js.org) + [Babel](https://babeljs.io/) build step before deploying.

This is maybe a little overkill, but it's hard to code without [arrow functions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions), etc. at this point.

1. **Build Javascript:** `npm run build`
2. **Deploy files:** Copy the contents of `dist/` to `https://annelewisllc.s3.amazonaws.com/assets/salsa/1qs-dropdown-buttonizer`

## Usage

When it's time to use this code on a Salsa action page, add and initialize the script like this:

```html
<script src="https://annelewisllc.s3.amazonaws.com/assets/salsa/1qs-dropdown-buttonizer/convert-dropdowns.js"></script>

<script>
  convertDropdowns(highlightAnswer);
</script>
```
"Highlight" styling will be applied to `input` elements with a `value` attribute that equals `highlightAnswer`. This is usually used to indicate the "right" answer.

If multiple highlight answer values are provided any `input` whose `value` is one of those provided will receive highlight styling. Example:

```javascript
convertDropdowns(highlightAnswer1, highlightAnswer2, ...);
```


## Example

As of 2018-11-30, you can see this code in action on [Sen. Shaheen's Salsa site](https://action.jeanneshaheen.org/p/dia/action4/common/public/?action_KEY=1212#fb).
